<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>柱形图</title>
</head>

<body>
    <p></p>
</body>
<script src='../d3/d3.v5.js'></script>
<script>
    const dataSet = [50,43,120,87,99,167,142];
    const padding = {
        left:20,
        top:20,
        bottom:25,
        left:20,
    }
    const width = 400;
    const height = 200;
    const svg = d3.select('body')
                .append('svg')
                .attr('width',width)
                .attr('height',height)
                .attr('transform',`translate(${window.innerWidth/2-200},${window.innerHeight/2-200})`);
    
    let hscale = d3.scaleLinear()
                    .domain([0,200])
                    .range([200,0]);

    let xscale = d3.scaleLinear()
                    .domain([0,dataSet.length])
                    .range([0,400]);


    let rect = svg.selectAll('rect')
                  .data(dataSet)
                  .enter()
                  .append('rect')
                  .attr('fill','#000')
                  .attr('width',30)
                  .attr('height',(d,i)=>hscale(d))
                  .attr('x',(d,i)=>padding.left+i*35)
                  .attr('y',function(d,i){
                      return height-hscale(d)-padding.bottom;
                  });
    
    let xAxis = d3.axisBottom()
                .scale(xscale)
                .ticks(dataSet.length)
                // .tickValues(d3.range(dataSet.length));
    
    let yAxis = d3.axisLeft()
                .scale(hscale)
                .ticks(10);

    svg.append('g')
        .attr('transform', 'translate(20, 180)')
        .call(xAxis);

    svg.append('g')
        .attr('transform', 'translate(20, -10)')
        .call(yAxis);
    

    

    

</script>

</html>